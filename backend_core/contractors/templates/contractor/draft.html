{% extends 'base.html' %}
{% load staticfiles %}

{#style#}
{% block metainfo %}
{#    <link rel="stylesheet/less" type="text/css" href="{% static 'css/contractor.less' %}" />#}
    <link rel="stylesheet" href="{% static 'css/contractor.css' %}">
{#    <link rel="stylesheet" href="{% static 'star-ratings/css/star-ratings.css' %}">#}
{#    <script type="text/javascript" src="{% static 'star-ratings/js/dist/star-ratings.min.js' %}"></script>#}
    <style>
        #masthead {
            background:url('{{ info_dict.bgimage.url }}') no-repeat center;
            min-height:270px;
            background-size:contain;
            display: flex;
            color:#aaaacc;
            }
    </style>
{% endblock %}

{#header#}
{% block header %}
<div id="masthead" class="container">

        <div class="row col-md-12 ">
            <div class="col-md-7 col-lg-7 ">
                <h1>{{ info_dict.contractor.BusName }}

                </h1>
                <div class="row horizontal-list">
            <ul style="list-style-type:None;">
                <li>{{ info_dict.contractor.County }}, {{ info_dict.contractor.State }}</li>
                <li>Score: {{ info_dict.Score}}</li>
                <li>Phone: {{ info_dict.contractor.Phone }}</li>
                <li>Overall Rating:{% for key,value in info_dict.ratings.overall %} {{ key }} {% endfor %}
                    <div class="star-ratings-css">
                        <div class="star-ratings-css-top" style="width:50%">
                            {%  for i in info_dict.ratings.stars %}
                                <span>★</span>
                            {% endfor %}
                    </div>
                        <div class="star-ratings-css-bottom">
                            {%  for i in info_dict.ratings.stars %}
                                <span>★</span>
                            {% endfor %}
                        </div>
                    </div>
                </li>
            </ul>
        </div>
            </div>
            <div class="col-md-5 col-lg-5">

            </div>
        </div>
</div>
<!-- /cont -->
{% endblock %}

{% block content %}
<!-- Begin Body -->
<div class='container professional-menu'>
    <ul>
        <li><a href="{{ request.path }}../overview/">overview</a></li>
        <li><a href="{{ request.path }}../project-photos/">Project Photos</a></li>
        <li><a href="{{ request.path }}../review/">Review</a></li>
        <li><a href="#">Other</a></li>
    </ul>
</div>

<div class='container professional-menu'>
    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-overview" role="tab" aria-controls="pills-home" aria-expanded="true">Overview</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-projectphotos" role="tab" aria-controls="pills-profile" aria-expanded="true">Project Photos</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-review" role="tab" aria-controls="pills-profile" aria-expanded="true">Review</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-other" role="tab" aria-controls="pills-profile" aria-expanded="true">Other</a>
      </li>
{#      <li class="nav-item dropdown">#}
{#        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Dropdown</a>#}
{#        <div class="dropdown-menu">#}
{#          <a class="dropdown-item" id="pills-dropdown1-tab" href="#pills-dropdown1" role="tab" data-toggle="pill" aria-controls="pills-dropdown1">@fat</a>#}
{#          <a class="dropdown-item" id="pills-dropdown2-tab" href="#pills-dropdown2" role="tab" data-toggle="pill" aria-controls="pills-dropdown2">@mdo</a>#}
{#        </div>#}
{#      </li>#}
    </ul>
</div>

<div class="tab-content" id="pills-tabContent">
  <div class="tab-pane fade show active" id="pills-overview" role="tabpanel" aria-labelledby="pills-home-tab">
      <div class="container" id="mainbody">
            <div class="row">
                {% include 'contractor/contractor leftsidebar.html' %}
                {% include 'contractor/contractor mainbody.html' %}
                {% include 'contractor/contractor rightsidebar.html' %}
            </div>
        </div>
  </div>
  <div class="tab-pane fade" id="pills-projectphotos" role="tabpanel" aria-labelledby="pills-profile-tab">
        {%  for pic in  info_dict.project_photos %}
            <img src="{{ pic.img.url }}" title="{{ pic.title }}" style="height:50%;width:50%">
        {%  endfor %}
  </div>
  <div class="tab-pane fade" id="pills-dropdown1" role="tabpanel" aria-labelledby="pills-dropdown1-tab">...</div>
  <div class="tab-pane fade" id="pills-dropdown2" role="tabpanel" aria-labelledby="pills-dropdown2-tab">...</div>
</div>


<div class="container" id="mainbody">
	<div class="row">

        {% include 'contractor/contractor leftsidebar.html' %}
        {% include 'contractor/contractor mainbody.html' %}
        {% include 'contractor/contractor rightsidebar.html' %}

  	</div>
</div>
{% endblock %}


{%  block javascript %}
<script>
$(document).ready(function() {
    $(".expanded").hide();

    $(".expanded a, .collapsed a").click(function(eve) {
        var $container = $(this).parents("div");
        eve.preventDefault();
        $container.children(".expanded, .collapsed").toggle();
    });
});
</script>
{%  endblock %}

<div class="row">

    <div id="BasicInfo" class="col-5 col-sm-5 col-md-5 col-lg-5">
        <div class="panel panel-default">
            <div class="panel-heading">Basic Information</div>

            <div class="panel-body">
                <table>
                    <tr>
                        <td class="rname">License #:</td>
                        <td>{{ info_dict.contractor.lic_num }}</td>
                    </tr>
                    <tr>
                        <td class="rname">License Status:</td>
                        <td>{{ info_dict.contractor.lic_status }}</td>
                    </tr>
                    <tr>
                        <td class="rname">License Type:</td>
                        <td>{% for item in info_dict.lic_type %}{{ item }}<br> {% endfor %}</td>
                    </tr>

                    <tr>
                        <td class="rname">Entity:</td>
                        <td>{{ info_dict.contractor.entity }}</td>
                    </tr>
                    <tr>
                        <td class="rname">Issued Date:</td>
                        <td>{{ info_dict.contractor.lic_issue_date }}</td>
                    </tr>
                    {% if info_dict.contractor.lic_expire_date %}
                        <tr>
                            <td class="rname">Expiration Date:</td>
                            <td>{{ info_dict.contractor.lic_expire_date }}</td>
                        </tr>
                    {% endif %}
                    <tr>
                        <td class="rname">Bonded:</td>
                        <td>{{ info_dict.bond_history.surety_company }}</td>
                    </tr>
                    <tr>
                        <td class="rname">Issued:</td>
                        <td>{{ info_dict.wc_history.insur_company }}</td>
                    </tr>
                    <tr>
                        <td class="rname">Address:</td>
                        <td>{{ info_dict.contractor.street_address }} <br/>
                            {{ info_dict.contractor.csp }}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <!--summary-->
    <div id="Summary" class="col-7 col-sm-7 col-md-7 col-lg-7">
        <div class="panel panel-default">
            <div class="panel-heading">Overview</div>
            <div class="panel-body">
                {{ info_dict.overview }}
                <br>
                <span class="collapsed">
         <a href="javascript:void(0)"> READ MORE</a>
        </span>

                <span class="expanded">
            {{ info_dict.overview }}
            {{ info_dict.overview }}
            {{ info_dict.overview }}
            <br>
            <a href="javascript:void(0)">Less</a>
        </span>
            </div>
        </div>
    </div>


</div>


<div>
    <!--photo-->
    <div id="photo" class="contractor-block">
        <div class="panel panel-default">
            <div class="panel-heading">Photo</div>
            <div class="panel-body">
                <div class="row">
                    {% for image in info_dict.photo %}
                        {#                      <div class="numbertext">1 / {{ photo|length }}</div>#}
                        <div class="col-sm-12 col-md-6 col-lg-4 picstyle"><img class='cover img-responsive'
                                                                               src="{{ image.image.url }}"></div>
                    {% endfor %}
                    <br>
                </div>
            </div>

        </div>

    </div>

</div>

<!--basic information-->
<div id="Review" class="contractor-block">
    <h1>Review</h1>
    <hr>
    <div class="review-row">
        {% for rv in info_dict.review %}
            <div>
                {{ rv.comments }}
                <br>
                {{ rv.project_cost }}
                <br>
                {{ rv.project_type }}
                <br>
                {{ rv.project_duration }}
                <br>
                {% if rv.is_anonymous == 1 %}
                    Anonymous User
                {% else %}
                    {{ rv.user.first_name }}{{ rv.user.last_name }}
                {% endif %}
                <br>
                {% for r in rv.userrating_set.all %}
                    {{ r.get_rating_type_display }}:{{ r.rating_score }}
                    <br>
                {% endfor %}
                <br>
                {% for img in rv.photo.all %}
                    <img src="{{ img.img.url }}" title="{{ img.title }}" style="width:20px;height:20px;">
                {% endfor %}
                <br>
            </div>
        {% endfor %}

    </div>


</div>



        <div class="panel panel-default">
            <div class="panel-heading">Business Information</div>

            <div class="panel-body">
                <table>
                    <tr>
                        <td class="rname">License #:</td>
                        <td>{{ info_dict.contractor.lic_num }}</td>
                    </tr>
                    <tr>
                        <td class="rname">License Status:</td>
                        <td>{{ info_dict.contractor.lic_status }}</td>
                    </tr>
                    <tr>
                        <td class="rname">License Type:</td>
                        <td>{% for item in info_dict.lic_type %}{{ item }}<br> {% endfor %}</td>
                    </tr>

                    <tr>
                        <td class="rname">Entity:</td>
                        <td>{{ info_dict.contractor.entity }}</td>
                    </tr>
                    <tr>
                        <td class="rname">Issued Date:</td>
                        <td>{{ info_dict.contractor.lic_issue_date }}</td>
                    </tr>
                    {% if info_dict.contractor.lic_expire_date %}
                        <tr>
                            <td class="rname">Expiration Date:</td>
                            <td>{{ info_dict.contractor.lic_expire_date }}</td>
                        </tr>
                    {% endif %}
                    <tr>
                        <td class="rname">Bonded:</td>
                        <td>{{ info_dict.bond_history.surety_company }}</td>
                    </tr>
                    <tr>
                        <td class="rname">Issued:</td>
                        <td>{{ info_dict.wc_history.insur_company }}</td>
                    </tr>
                    <tr>
                        <td class="rname">Address:</td>
                        <td>{{ info_dict.contractor.street_address }} <br/>
                            {{ info_dict.contractor.csp }}</td>
                    </tr>
                </table>
            </div>


                <div id="photo" class="col-12 col-md-8 col-lg-8">
                    <div class="panel panel-default">
                        <div class="panel-heading">Photo</div>
                        <div class="panel-body">
                            <div class="video-content-wrapper">
                                {% for image in info_dict.project_photos %}
                                    {#                      <div class="numbertext">1 / {{ photo|length }}</div>#}
                                    {% if forloop.first %}
                                        <div class="video-stage">
                                            <div class="img-responsive">
                                                <img class='cover' src="{{ image.img.url }}">
                                            </div>
                                        </div>
                                    {% else %}
                                        <div class="video-preview">
                                            <div class="img-responsive">
                                                <img class='cover' src="{{ image.img.url }}">
                                            </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>

                    </div>

                </div>