{% extends 'base.html' %}


{% block header %}

{% endblock %}

{% block banner %}
    {% include 'search_bar/search_bar.html' %}
{% endblock %}

{% block content %}
    <div class="row">
    {% if contractors.count > 0 %}
        <div class="col-lg-2">
            {% include 'search_sidebar/search_sidebar.html' %}
        </div>
        <div class="col-lg-7">
            <div class="list-group">
            {% for contractor in contractors %}
                {% include 'search_card/search_card.html' %}
            {% endfor %}
            </div>
            <!--TODO: show all pagination numbers-->
            <div class="list-pagination">
                <ul class="pagination">
                    <li class="page-item">
                        <span class="page-link">
                            {% if contractors.has_previous %}
                                <a href="?{{ parameters }}&page={{ contractors.previous_page_number }}">previous</a>
                            {% endif %}
                        </span>
                    </li>
                    <li class="page-item active">
                        <span class="page-link">
                            <!--Page {{ contractors.number }} of {{ contractors.paginator.num_pages }}.-->
                            {{ contractors.number }}
                        </span>
                    </li>
                    <li class="page-item">
                        <span class="page-link">
                            {% if contractors.has_next %}
                                <a href="?{{ parameters }}&page={{ contractors.next_page_number }}&">next</a>
                            {% endif %}
                        </span>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="map" id="googleMap" style="width:100%;height:400px;"></div>
        </div>
    {% else %}
    </div>
<!--TODO: change to nearby zipcode in render-->
       <p>No Contractor match your condition</p>
    {% endif %}


<script>
    function myMap() {
        var mapProp= {
            center:new google.maps.LatLng(51.508742,-0.120850),
            zoom:5,
        };
        var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);
    }
</script>

<script src="https://maps.googleapis.com/maps/api/js?key={{ GOOGLE_API_KEY }}&callback=myMap"></script>

{% endblock %}